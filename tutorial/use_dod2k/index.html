
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Database of databases">
      
      
      
      
        <link rel="prev" href="../quickstart/">
      
      
        <link rel="next" href="../load_merge/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Explore DoD2k - DoD2k Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#loading-the-dod2k-database" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DoD2k Documentation" class="md-header__button md-logo" aria-label="DoD2k Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DoD2k Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Explore DoD2k
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lluecke/dod2k" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    lluecke/dod2k
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../installation/" class="md-tabs__link">
        
  
  
    
  
  Installation

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../quickstart/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../api/" class="md-tabs__link">
        
  
  
    
  
  API Reference

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../notebooks/df_info/" class="md-tabs__link">
          
  
  
  Notebooks

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DoD2k Documentation" class="md-nav__button md-logo" aria-label="DoD2k Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DoD2k Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lluecke/dod2k" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    lluecke/dod2k
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Explore DoD2k
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Explore DoD2k
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-dod2k" class="md-nav__link">
    <span class="md-ellipsis">
      What is DoD2k?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-database" class="md-nav__link">
    <span class="md-ellipsis">
      The database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-the-database-from-csv" class="md-nav__link">
    <span class="md-ellipsis">
      Loading the database from csv
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Loading the database from csv">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-set-up-your-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Set up your environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-load-the-data-from-csv" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Load the data from csv
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternatively-load-the-database-from-the-pickle" class="md-nav__link">
    <span class="md-ellipsis">
      Alternatively: Load the database from the pickle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#explore-the-dataframe-and-visualise-the-data" class="md-nav__link">
    <span class="md-ellipsis">
      Explore the dataframe and visualise the data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Explore the dataframe and visualise the data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-3-explore-the-dataframe-column-by-column" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Explore the dataframe column by column
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-visualise-the-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Visualise the dataframe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filter-the-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      Filter the dataframe
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../load_merge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Load and merge original databases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../duplicate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Duplicate Detection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../from_scratch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generate DoD2k from scratch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Applications
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Notebooks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/df_info/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Display entries of compact dataframe column by column
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/df_plot_dod2k/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualise DoD2k
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/df_filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filter compact dataframe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/dup_detection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Duplicate detection - step 1: find the potential duplicates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/dup_decision/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Duplicate detection - step 2: review and decide on candidate pairs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/dup_removal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Duplicate detection - step 3: remove true duplicates
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-dod2k" class="md-nav__link">
    <span class="md-ellipsis">
      What is DoD2k?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-database" class="md-nav__link">
    <span class="md-ellipsis">
      The database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-the-database-from-csv" class="md-nav__link">
    <span class="md-ellipsis">
      Loading the database from csv
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Loading the database from csv">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-set-up-your-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Set up your environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-load-the-data-from-csv" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Load the data from csv
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternatively-load-the-database-from-the-pickle" class="md-nav__link">
    <span class="md-ellipsis">
      Alternatively: Load the database from the pickle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#explore-the-dataframe-and-visualise-the-data" class="md-nav__link">
    <span class="md-ellipsis">
      Explore the dataframe and visualise the data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Explore the dataframe and visualise the data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-3-explore-the-dataframe-column-by-column" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Explore the dataframe column by column
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-visualise-the-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Visualise the dataframe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filter-the-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      Filter the dataframe
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="loading-the-dod2k-database"><strong>Loading the DoD2k Database</strong></h1>
<p>This tutorial shows you how to load and explore the DoD2k paleoclimate database.</p>
<h2 id="what-is-dod2k"><strong>What is DoD2k?</strong></h2>
<p>DoD2k (Database of Databases 2k) integrates five major paleoclimate databases:</p>
<ul>
<li>PAGES 2k (v2.0.0)</li>
<li>FE 23</li>
<li>SISAL v3</li>
<li>Iso2k (v1.0.1)</li>
<li>CoralHydro2k (v1.0.0)</li>
</ul>
<p>Since these databases may share a number of records, these databases were subject to a <strong>duplicate detection and removal process</strong>. The resulting output is <strong>DoD2k</strong>.</p>
<h2 id="the-database"><strong>The database</strong></h2>
<p>The database is saved in <code>root_dir/data/dod2k_dupfree_dupfree</code> and provided in two data formats:</p>
<ul>
<li>pickle format (fast, python only):
  <div class="highlight"><pre><span></span><code>dod2k_dupfree_dupfree_compact.pkl
</code></pre></div></li>
<li>comma seperated value format (portable, readable)
  <div class="highlight"><pre><span></span><code>dod2k_dupfree_dupfree_compact_year.csv
dod2k_dupfree_dupfree_compact_metadata.csv
dod2k_dupfree_dupfree_compact_paleoData_values.csv
</code></pre></div></li>
</ul>
<p>In this directory we also provide a text file 
<div class="highlight"><pre><span></span><code>dod2k_dupfree_dupfree_compact_README.txt
</code></pre></div>
which shows the details of the duplicate screening process (date, operator credentials, notes).</p>
<p><strong>Which Format Should I Use?</strong></p>
<ul>
<li>CSV: Best for interoperability and inspecting data manually</li>
<li>Pickle: Faster loading, preserves numpy arrays without conversion - python only!!!</li>
</ul>
<p>Here we explain how to load these files into a pandas dataframe using python.</p>
<h2 id="loading-the-database-from-csv"><strong>Loading the database from csv</strong></h2>
<h3 id="step-1-set-up-your-environment">Step 1: Set up your environment</h3>
<p>Start in the repository root directory (<code>dod2k/</code>). From here import</p>
<p><div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Add dod2k to path</span>
<span class="n">repo_root</span> <span class="o">=</span> <span class="n">Path</span><span class="p">()</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">repo_root</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">repo_root</span><span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dod2k_utilities.ut_functions</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_compact_dataframe_from_csv</span>
</code></pre></div>
The function <code>load_compact_dataframe_from_csv</code> imports the different csv files and stitches them together to form a dataframe. See <a href="../../api/ut_functions/#load_compact_dataframe_from_csv"><code>load_compact_dataframe_from_csv()</code></a> for details.</p>
<h3 id="step-2-load-the-data-from-csv">Step 2: Load the data from csv</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Load the duplicate-free database</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">load_compact_dataframe_from_csv</span><span class="p">(</span><span class="s1">&#39;dod2k_dupfree_dupfree&#39;</span><span class="p">)</span>

<span class="c1"># Check the shape</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database contains </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s2"> records&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Columns: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="alternatively-load-the-database-from-the-pickle">Alternatively: Load the database from the pickle</h2>
<p>For faster loading and if you only need python access, use the pickle format.
Make sure you start in the repository root directory (<code>dod2k</code>). From here import
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Load the duplicate-free database</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;/data/dod2k_dupfree_dupfree/dod2k_dupfree_dupfree_compact.pkl&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database contains </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s2"> records&quot;</span><span class="p">)</span>
</code></pre></div></p>
<h2 id="explore-the-dataframe-and-visualise-the-data"><strong>Explore the dataframe and visualise the data</strong></h2>
<h3 id="step-3-explore-the-dataframe-column-by-column">Step 3: Explore the dataframe column by column</h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</code></pre></div>
<p>Under <code>repo_root/notebooks</code> you can find the notebook <code>df_info.ipynb</code>. This notebook goes through the dataframe column by column and shows you a quick summary of the entries. </p>
<p>The key features of this notebook are:</p>
<div class="highlight"><span class="filename">Input</span><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
</code></pre></div>
<p><div class="highlight"><span class="filename">Output</span><pre><span></span><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 4516 entries, 0 to 4515
Data columns (total 19 columns):
 #   Column                                Non-Null Count  Dtype  
---  ------                                --------------  -----  
 0   archiveType                           4516 non-null   object 
 1   climateInterpretation_variable        4516 non-null   object 
 2   climateInterpretation_variableDetail  4516 non-null   object 
 3   dataSetName                           4516 non-null   object 
 4   datasetId                             4516 non-null   object 
 5   duplicateDetails                      4516 non-null   object 
 6   geo_meanElev                          4433 non-null   float32
 7   geo_meanLat                           4516 non-null   float32
 8   geo_meanLon                           4516 non-null   float32
 9   geo_siteName                          4516 non-null   object 
 10  originalDataURL                       4516 non-null   object 
 11  originalDatabase                      4516 non-null   object 
 12  paleoData_notes                       4516 non-null   object 
 13  paleoData_proxy                       4516 non-null   object 
 14  paleoData_sensorSpecies               4516 non-null   object 
 15  paleoData_units                       4516 non-null   object 
 16  paleoData_values                      4516 non-null   object 
 17  year                                  4516 non-null   object 
 18  yearUnits                             4516 non-null   object 
dtypes: float32(3), object(16)
memory usage: 617.6+ KB
None
</code></pre></div>
The interactive notebook then goes through each column and shows the entries, for example</p>
<div class="highlight"><span class="filename">Input</span><pre><span></span><code><span class="c1"># archiveType</span>
<span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;archiveType&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: &#39;</span><span class="o">%</span><span class="n">key</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">dd</span><span class="p">))</span> <span class="k">for</span> <span class="n">dd</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="n">key</span><span class="p">]]))</span>
</code></pre></div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>archiveType: 
[&#39;bivalve&#39; &#39;borehole&#39; &#39;coral&#39; &#39;documents&#39; &#39;glacier ice&#39; &#39;ground ice&#39;
 &#39;hybrid&#39; &#39;lake sediment&#39; &#39;marine sediment&#39; &#39;mollusk shells&#39;
 &#39;sclerosponge&#39; &#39;speleothem&#39; &#39;terrestrial sediment&#39; &#39;tree&#39;]
[&quot;&lt;class &#39;str&#39;&gt;&quot;]
</code></pre></div>
<div class="highlight"><span class="filename">Input</span><pre><span></span><code><span class="c1"># paleoData_proxy</span>
<span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;paleoData_proxy&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: &#39;</span><span class="o">%</span><span class="n">key</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">([</span><span class="n">kk</span> <span class="k">for</span> <span class="n">kk</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="n">key</span><span class="p">]]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">dd</span><span class="p">))</span> <span class="k">for</span> <span class="n">dd</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="n">key</span><span class="p">]]))</span>
</code></pre></div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code>paleoData_proxy: 
[&#39;BSi&#39; &#39;Documentary&#39; &#39;MXD&#39; &#39;Mg/Ca&#39; &#39;Sr/Ca&#39; &#39;TEX86&#39; &#39;TRW&#39; &#39;alkenone&#39;
 &#39;borehole&#39; &#39;calcification&#39; &#39;calcification rate&#39; &#39;chironomid&#39;
 &#39;chrysophyte&#39; &#39;d13C&#39; &#39;d18O&#39; &#39;d2H&#39; &#39;diatom&#39; &#39;dynocist MAT&#39; &#39;foram Mg/Ca&#39;
 &#39;foram d18O&#39; &#39;foraminifera&#39; &#39;growth rate&#39; &#39;historic&#39; &#39;hybrid&#39; &#39;melt&#39;
 &#39;midge&#39; &#39;pollen&#39; &#39;reflectance&#39; &#39;sed accumulation&#39; &#39;varve property&#39;
 &#39;varve thickness&#39;]
[&quot;&lt;class &#39;str&#39;&gt;&quot;]
</code></pre></div>
<p>For further guidance see the <a href="../../notebooks/df_info/">interactive notebook</a>.</p>
<h3 id="step-4-visualise-the-dataframe">Step 4: Visualise the dataframe</h3>
<p>Under <code>repo_root/notebooks</code> you can find the notebook <code>df_plot_dod2k.ipynb</code>. This notebook visualises the dataframe and produces summary figures of the database. It also reproduces the manuscript figures. </p>
<p>Import the python libraries
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">cartopy.crs</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ccrs</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">cartopy.feature</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">cfeature</span> 
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.gridspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">GridSpec</span> <span class="k">as</span> <span class="n">GS</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">copy</span><span class="w"> </span><span class="kn">import</span> <span class="n">deepcopy</span> <span class="k">as</span> <span class="n">dc</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">dod2k_utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">ut_functions</span> <span class="k">as</span> <span class="n">utf</span> <span class="c1"># contains utility functions</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dod2k_utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">ut_plot</span> <span class="k">as</span> <span class="n">uplt</span> <span class="c1"># contains plotting functions</span>
</code></pre></div></p>
<p>After loading the dataframe, start off by counting the number of records in each archive type:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># count archive types</span>
<span class="n">archive_count</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">at</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;archiveType&#39;</span><span class="p">])):</span>
    <span class="n">archive_count</span><span class="p">[</span><span class="n">at</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;archiveType&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">at</span><span class="p">,</span> <span class="s1">&#39;archiveType&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</code></pre></div>
<p>Now count the number of records for each proxy type, depending on the archive type:
<div class="highlight"><pre><span></span><code><span class="n">archive_proxy_count</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">archive_proxy_ticks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">at</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;archiveType&#39;</span><span class="p">])):</span>
    <span class="n">proxy_types</span>   <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;paleoData_proxy&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;archiveType&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">at</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">proxy_types</span><span class="p">:</span>
        <span class="n">cc</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;paleoData_proxy&#39;</span><span class="p">][(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;paleoData_proxy&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">pt</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;archiveType&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">at</span><span class="p">)]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
        <span class="n">archive_proxy_count</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">at</span><span class="p">,</span> <span class="n">pt</span><span class="p">)]</span> <span class="o">=</span> <span class="n">cc</span>
        <span class="n">archive_proxy_ticks</span> <span class="o">+=</span> <span class="p">[</span><span class="n">at</span><span class="o">+</span><span class="s1">&#39;: &#39;</span><span class="o">+</span><span class="n">pt</span><span class="p">]</span>
</code></pre></div></p>
<p>For each archive type, specify colours for each archive, but also distinguish between major archives (which have the most records) and minor archives (rare ones, only including less than ten records):
<div class="highlight"><pre><span></span><code><span class="n">archive_colour</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;other&#39;</span><span class="p">:</span> <span class="n">cols</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]}</span>
<span class="n">other_archives</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">major_archives</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">sort</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">([</span><span class="n">cc</span> <span class="k">for</span> <span class="n">cc</span> <span class="ow">in</span> <span class="n">archive_count</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
<span class="n">archives_sorted</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">cc</span> <span class="k">for</span> <span class="n">cc</span> <span class="ow">in</span> <span class="n">archive_count</span><span class="o">.</span><span class="n">keys</span><span class="p">()])[</span><span class="n">sort</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">at</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">archives_sorted</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">at</span><span class="p">,</span> <span class="n">archive_count</span><span class="p">[</span><span class="n">at</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">archive_count</span><span class="p">[</span><span class="n">at</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">:</span>
        <span class="n">major_archives</span>     <span class="o">+=</span><span class="p">[</span><span class="n">at</span><span class="p">]</span>
        <span class="n">archive_colour</span><span class="p">[</span><span class="n">at</span><span class="p">]</span> <span class="o">=</span> <span class="n">cols</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">other_archives</span>     <span class="o">+=</span><span class="p">[</span><span class="n">at</span><span class="p">]</span>
        <span class="n">archive_colour</span><span class="p">[</span><span class="n">at</span><span class="p">]</span> <span class="o">=</span> <span class="n">cols</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div>
Now plot a bar chart of the major archives using <a href="../../api/ut_plot/#plot_count_proxy_by_archive_short"><code>plot_count_proxy_by_archive_short()</code></a></p>
<div class="highlight"><pre><span></span><code><span class="n">uplt</span><span class="o">.</span><span class="n">plot_count_proxy_by_archive_short</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">archive_proxy_count</span><span class="p">,</span> <span class="n">archive_proxy_ticks</span><span class="p">,</span> <span class="n">archive_colour</span><span class="p">)</span> 
</code></pre></div>
<figure markdown="span">
  ![Archive map](/figs/dod2k_dupfree_dupfree/dod2k_dupfree_dupfree_proxy_count_short.jpg){ width="800" }
  <figcaption>Figure 1: Number of records for each proxy type, by archive.</figcaption>
</figure>

<p>Next plot a spatial plot of all the proxy records:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#%% plot the spatial distribution of all records</span>
<span class="n">proxy_lats</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;geo_meanLat&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">proxy_lons</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;geo_meanLon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># plots the map</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">350</span><span class="p">)</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">GS</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">grid</span><span class="p">[:,</span> <span class="p">:],</span> <span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Robinson</span><span class="p">())</span> <span class="c1"># create axis with Robinson projection of globe</span>

<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAND</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span> <span class="c1"># adds land features</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;#C5DEEA&#39;</span><span class="p">)</span> <span class="c1"># adds ocean features</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span> <span class="c1"># adds coastline features</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>

<span class="c1"># loop through the data to generate a scatter plot of each data record:</span>
<span class="c1"># 1st loop: go through archive types individually (determines marker type)</span>
<span class="c1"># 2nd loop: through paleo proxy types attributed to the specific archive, which is colour coded</span>


<span class="n">mt</span> <span class="o">=</span> <span class="s1">&#39;ov^s&lt;&gt;pP*XDdh&#39;</span><span class="o">*</span><span class="mi">10</span> <span class="c1"># generates string of marker types</span>

<span class="n">archive_types</span> <span class="o">=</span> <span class="n">major_archives</span><span class="o">+</span><span class="n">other_archives</span>
<span class="c1"># archive_types = [aa for aa in archive_types if aa!=&#39;other&#39;]</span>


<span class="n">ijk</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">jj</span><span class="p">,</span> <span class="n">at</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">archive_types</span><span class="p">):</span>
    <span class="n">arch_mask</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;archiveType&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">at</span>
    <span class="n">arch_proxy_types</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;paleoData_proxy&#39;</span><span class="p">][</span><span class="n">arch_mask</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">pt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arch_proxy_types</span><span class="p">):</span>
        <span class="n">pt_mask</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;paleoData_proxy&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">pt</span>
        <span class="n">at_mask</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;archiveType&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">at</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">at</span><span class="o">+</span><span class="s1">&#39;: &#39;</span><span class="o">+</span><span class="n">pt</span><span class="o">+</span><span class="s1">&#39; ($n=</span><span class="si">%d</span><span class="s1">$)&#39;</span><span class="o">%</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;paleoData_proxy&#39;</span><span class="p">][(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;paleoData_proxy&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">pt</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;archiveType&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">at</span><span class="p">)]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="n">mt</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span> <span class="k">if</span> <span class="n">at</span> <span class="ow">in</span> <span class="n">major_archives</span> <span class="k">else</span> <span class="n">mt</span><span class="p">[</span><span class="n">ijk</span><span class="p">]</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">proxy_lons</span><span class="p">[</span><span class="n">pt_mask</span><span class="o">&amp;</span><span class="n">at_mask</span><span class="p">],</span> <span class="n">proxy_lats</span><span class="p">[</span><span class="n">pt_mask</span><span class="o">&amp;</span><span class="n">at_mask</span><span class="p">],</span> 
                    <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">999</span><span class="p">,</span>
                    <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">archive_colour</span><span class="p">[</span><span class="n">at</span><span class="p">],</span> 
                    <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span><span class="c1">#.replace(&#39;marine sediment:&#39;, &#39;marine sediment:\n&#39;), </span>
                    <span class="n">lw</span><span class="o">=</span><span class="mf">.3</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">at</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">major_archives</span><span class="p">:</span> <span class="n">ijk</span><span class="o">+=</span><span class="mi">1</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.01</span><span class="p">,</span><span class="o">-</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mf">13.5</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">grid</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">utf</span><span class="o">.</span><span class="n">save_fig</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">_spatial_all&#39;</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
<p>Which creates this plot</p>
<figure markdown="span">
  ![Archive map](/figs/dod2k_dupfree_dupfree/dod2k_dupfree_dupfree_spatial_all.jpg){ width="800" }
  <figcaption>Figure 2: Spatial distribution of records by archive and proxy type.</figcaption>
</figure>

<p>For further guidance see the <a href="../../notebooks/df_plot_dod2k/">interactive notebook</a>.</p>
<h2 id="filter-the-dataframe"><strong>Filter the dataframe</strong></h2>
<p>Under <code>repo_root/notebooks</code> you can find the notebook <code>df_filter.ipynb</code>. This notebook let's you filter the dataframe for a specific metadata type, e.g. for moisture sensitive records, or for tree/TRW type records, etc.</p>
<p>This notebook then saves the filtered dataframe as a compact dataframe under <code>repo_root/data</code>, from which it can be loaded by other notebooks (e.g. <code>df_plot_dod2k.ipynb</code>).</p>
<p>Start by loading the dataframe, then filter using e.g. 
<div class="highlight"><pre><span></span><code><span class="c1"># # filter for &gt;&gt;exclusively moisture&lt;&lt; sensitive records only (without t+m)</span>
<span class="n">df_filter</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;climateInterpretation_variable&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;moisture&#39;</span><span class="p">)]</span>
</code></pre></div></p>
<p>The resulting dataframe can then be saved and used as input for <code>df_info.ipynb</code> or <code>df_plot_dod2k.ipynb</code>, or you can add this line to another notebook if you prefer. </p>
<p>For further guidance see the <a href="../../notebooks/df_filter/">interactive notebook</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>